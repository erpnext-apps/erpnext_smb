{
  "version": 3,
  "sources": ["../../../../../apps/erpnext_smb/erpnext_smb/public/js/list_sidebar.js", "../../../../../apps/erpnext_smb/erpnext_smb/public/js/index.js", "../../../../../apps/erpnext_smb/erpnext_smb/public/js/limits.js"],
  "sourcesContent": ["$(document).on('list_sidebar_setup', function () {\n\tif (frappe.boot.trial_end_date) {\n\t\tlet upgrade_list = $(`<ul class=\"list-unstyled sidebar-menu\"></ul>`).appendTo(cur_list.page.sidebar);\n\n\t\tconst content = {\n\t\t\trenew: {\n\t\t\t\ttitle: 'Go Premium',\n\t\t\t\tbody: `You don't have a subscription yet, upgrade to keep using ERPNext.`,\n\t\t\t\tbutton: 'Subscribe'\n\t\t\t}\n\t\t}\n\n\t\tlet message = content.renew;\n\t\tlet upgrade_box = $(`<div class=\"border\" style=\"\n\t\t\t\t\tpadding: 10px 10px;\n\t\t\t\t\tborder-radius: 5px;\n\t\t\t\t\">\n\t\t\t\t<a><i class=\"octicon octicon-x pull-right close\" style=\"font-size: 15px\"></i></a>\n\t\t\t\t<h5>${message.title}</h5>\n\t\t\t\t<p>${message.body}</p>\n\t\t\t\t<button class=\"btn btn-xs btn-default btn-upgrade\" style=\"margin-bottom: 10px;\">${message.button}</button>\n\t\t\t\t</div>`).appendTo(upgrade_list);\n\n\t\tupgrade_box.find('.btn-upgrade').on('click', () => {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext_smb.limits.get_login_url\",\n\t\t\t\tcallback: function(url) {\n\t\t\t\t\twindow.open(\n\t\t\t\t\t\turl.message,\n\t\t\t\t\t\t'_blank'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\n\t\tupgrade_box.find('.close').on('click', () => {\n\t\t\tupgrade_list.remove();\n\t\t\tfrappe.flags.upgrade_dismissed = 1;\n\t\t});\n\t}\n});", "$(document).on('startup', () => {\n\tif (frappe.boot.trial_end_date && frappe.boot.setup_complete) {\n\t\tlet diff_days = frappe.datetime.get_day_diff(cstr(frappe.boot.trial_end_date), frappe.datetime.get_today()) - 1;\n\t\tlet subscription_string =  __(\"You have {0} days remaining in your trial.\", [(cstr(diff_days)).bold()])\n\t\t\n\t\tlet $bar = $(`<div class=\"shadow sm:rounded-lg py-2\" style=\"position:fixed; left: 145px; bottom:20px; width:80%; margin: auto; border-radius: 10px; background-color: #F7FAFC; z-index: 1\">\n\t\t\t\t<div style=\"display: inline-flex; align-items: center\", class=\"text-muted\">\n\t\t\t\t<p style=\"margin-left: 20px; margin-top:5px; font-size: 17px\">${subscription_string}</p>\n\t\t\t\t<button type=\"button\" class=\"button-renew px-4 py-2 border border-transparent text-white hover:bg-indigo-700 focus:outline-none focus:ring-offset-2 focus:ring-indigo-500\" style=\"background-color: #007bff; border-radius: 5px; margin-left:650px; margin-right: 10px\">Subscribe</button>\n\t\t\t\t<a type=\"button\" class=\"dismiss-upgrade text-muted\" data-dismiss=\"modal\" aria-hidden=\"true\" style=\"font-size:30px; margin-bottom: 5px; margin-right: 10px\">\u00D7</a>\n\t\t\t</div>\n\t\t</div>`);\n\n\t\t$('footer').append($bar);\n\t\t\n\t\t$bar.find('.button-renew').on('click', () => {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"erpnext_smb.limits.get_login_url\",\n\t\t\t\tcallback: function(url) {\n\t\t\t\t\twindow.open(\n\t\t\t\t\t\turl.message,\n\t\t\t\t\t\t'_blank'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\n\t\t$('.custom-actions').hide();\n\n\t\t$bar.find('.dismiss-upgrade').on('click', () => {\n\t\t\t$bar.remove();\n\t\t});\n\t}\n\n\tlet help_menu = $('.dropdown-help #help-links');\n\n\tif (help_menu.length > 0) {\n\t\tfrappe.call({\n\t\t\tmethod: \"erpnext_smb.limits.get_login_url\",\n\t\t\tcallback: function(url) {\n\t\t\t\t$(`<a class=\"dropdown-item\" \\\n\t\t\t\thref=\"${url.message}\" target=\"_blank\">` + __('Manage Subscription') + '</a>\\\n\t\t\t\t<div class=\"divider\"></div>').insertBefore(help_menu);\n\t\t\t\t}\n\t\t})\n\t}\n})", "frappe.provide('frappe.request');\nfrappe.provide('limits');\n\n\n$(() => {\n\tfrappe.request.on_error('PaywallReachedError', (r) => {\n\n\t\tlet msg = JSON.parse(r._server_messages);\n\t\tlimits.show_error_msg(JSON.parse(msg).message, 'Upgrade');\n\t});\n})\n\nlimits.show_error_msg = function(message, label) {\n\tfrappe.throw({\n\t\tmessage: message,\n\t\tprimary_action: {\n\t\t\tlabel: __(label),\n\t\t\taction: () => {\n\t\t\t\tfrappe.call({\n\t\t\t\t\tmethod: \"erpnext_smb.limits.get_login_url\",\n\t\t\t\t\tcallback: function(url) {\n\t\t\t\t\t\twindow.open(\n\t\t\t\t\t\t\turl.message,\n\t\t\t\t\t\t\t'_blank'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t});\n}"],
  "mappings": ";;AAAA,IAAE,QAAQ,EAAE,GAAG,sBAAsB,WAAY;AAChD,QAAI,OAAO,KAAK,gBAAgB;AAC/B,UAAI,eAAe,EAAE,8CAA8C,EAAE,SAAS,SAAS,KAAK,OAAO;AAEnG,YAAM,UAAU;AAAA,QACf,OAAO;AAAA,UACN,OAAO;AAAA,UACP,MAAM;AAAA,UACN,QAAQ;AAAA,QACT;AAAA,MACD;AAEA,UAAI,UAAU,QAAQ;AACtB,UAAI,cAAc,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,UAKZ,QAAQ;AAAA,SACT,QAAQ;AAAA,sFACqE,QAAQ;AAAA,WACnF,EAAE,SAAS,YAAY;AAEhC,kBAAY,KAAK,cAAc,EAAE,GAAG,SAAS,MAAM;AAClD,eAAO,KAAK;AAAA,UACX,QAAQ;AAAA,UACR,UAAU,SAAS,KAAK;AACvB,mBAAO,KACN,IAAI,SACJ,QACD;AAAA,UACD;AAAA,QACD,CAAC;AAAA,MACF,CAAC;AAED,kBAAY,KAAK,QAAQ,EAAE,GAAG,SAAS,MAAM;AAC5C,qBAAa,OAAO;AACpB,eAAO,MAAM,oBAAoB;AAAA,MAClC,CAAC;AAAA,IACF;AAAA,EACD,CAAC;;;ACxCD,IAAE,QAAQ,EAAE,GAAG,WAAW,MAAM;AAC/B,QAAI,OAAO,KAAK,kBAAkB,OAAO,KAAK,gBAAgB;AAC7D,UAAI,YAAY,OAAO,SAAS,aAAa,KAAK,OAAO,KAAK,cAAc,GAAG,OAAO,SAAS,UAAU,CAAC,IAAI;AAC9G,UAAI,sBAAuB,GAAG,8CAA8C,CAAE,KAAK,SAAS,EAAG,KAAK,CAAC,CAAC;AAEtG,UAAI,OAAO,EAAE;AAAA;AAAA,oEAEqD;AAAA;AAAA;AAAA;AAAA,SAI3D;AAEP,QAAE,QAAQ,EAAE,OAAO,IAAI;AAEvB,WAAK,KAAK,eAAe,EAAE,GAAG,SAAS,MAAM;AAC5C,eAAO,KAAK;AAAA,UACX,QAAQ;AAAA,UACR,UAAU,SAAS,KAAK;AACvB,mBAAO,KACN,IAAI,SACJ,QACD;AAAA,UACD;AAAA,QACD,CAAC;AAAA,MACF,CAAC;AAED,QAAE,iBAAiB,EAAE,KAAK;AAE1B,WAAK,KAAK,kBAAkB,EAAE,GAAG,SAAS,MAAM;AAC/C,aAAK,OAAO;AAAA,MACb,CAAC;AAAA,IACF;AAEA,QAAI,YAAY,EAAE,4BAA4B;AAE9C,QAAI,UAAU,SAAS,GAAG;AACzB,aAAO,KAAK;AAAA,QACX,QAAQ;AAAA,QACR,UAAU,SAAS,KAAK;AACvB,YAAE,sCACM,IAAI,8BAA8B,GAAG,qBAAqB,IAAI,qCAC1C,EAAE,aAAa,SAAS;AAAA,QACpD;AAAA,MACF,CAAC;AAAA,IACF;AAAA,EACD,CAAC;;;AC9CD,SAAO,QAAQ,gBAAgB;AAC/B,SAAO,QAAQ,QAAQ;AAGvB,IAAE,MAAM;AACP,WAAO,QAAQ,SAAS,uBAAuB,CAAC,MAAM;AAErD,UAAI,MAAM,KAAK,MAAM,EAAE,gBAAgB;AACvC,aAAO,eAAe,KAAK,MAAM,GAAG,EAAE,SAAS,SAAS;AAAA,IACzD,CAAC;AAAA,EACF,CAAC;AAED,SAAO,iBAAiB,SAAS,SAAS,OAAO;AAChD,WAAO,MAAM;AAAA,MACZ;AAAA,MACA,gBAAgB;AAAA,QACf,OAAO,GAAG,KAAK;AAAA,QACf,QAAQ,MAAM;AACb,iBAAO,KAAK;AAAA,YACX,QAAQ;AAAA,YACR,UAAU,SAAS,KAAK;AACvB,qBAAO,KACN,IAAI,SACJ,QACD;AAAA,YACD;AAAA,UACD,CAAC;AAAA,QACF;AAAA,MACD;AAAA,IACD,CAAC;AAAA,EACF;",
  "names": []
}
